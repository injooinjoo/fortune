# ì„¤ê³„ê³„íšì„œ: Phase 2.2 ë©”ì¸/í™ˆ ê°œì„ 

## ğŸ“‹ ìš”êµ¬ì‚¬í•­ ìš”ì•½

| ë²ˆí˜¸ | í•­ëª© | ì‘ì—… ë‚´ìš© | ìš°ì„ ìˆœìœ„ |
|------|------|----------|---------|
| 2.2.1 | ë¡œë”© ë¡œê³  ë¦¬ë‰´ì–¼ | ìƒˆ ë””ìì¸ ì—ì…‹ êµì²´ | ì¤‘ |
| 2.2.2 | ê¸ˆì „ìš´/í•™ì—…ìš´ ì œëª© | ê°€ìš´ë° ì •ë ¬ ì ìš© | ë†’ìŒ |
| 2.2.3 | ì‚¬ì£¼ì¸ì‚¬ì´íŠ¸ í•œì | í•œì í‘œê¸° ì¶”ê°€ | ë†’ìŒ |
| 2.2.4 | ë¹„ìŠ·í•œ ì‚¬ì£¼ ì´ë¯¸ì§€ | ì—°ì˜ˆì¸ ì´ë¯¸ì§€ ì—ì…‹ ì¶”ê°€ | ì¤‘ |
| 2.2.5 | ìš´ì„¸ ìŠ¤í¬ë¦½íŠ¸ í†¤ ë³€ê²½ | Edge Function í”„ë¡¬í”„íŠ¸ ìˆ˜ì • | ë‚®ìŒ |

---

## ğŸ“Š í˜„í™© ë¶„ì„

### í™ˆ í™”ë©´ êµ¬ì¡°
```
fortune_swipe_page.dart (17ê°œ ì¹´ë“œ PageView)
â”œâ”€â”€ Card 0: overall_card.dart (ì´ìš´)
â”œâ”€â”€ Card 1: radar_card.dart (5ê°œ ì¹´í…Œê³ ë¦¬ ë ˆì´ë”)
â”œâ”€â”€ Card 2: time_slot_card.dart (ì‹œê°„ëŒ€ë³„)
â”œâ”€â”€ Card 3-7: category_detail_card.dart (ì—°ì• /ê¸ˆì „/ì§ì¥/í•™ì—…/ê±´ê°•)
â”œâ”€â”€ Card 8: lucky_items_card.dart (í–‰ìš´ ì•„ì´í…œ)
â”œâ”€â”€ Card 9: celebrity_card.dart (ë¹„ìŠ·í•œ ì‚¬ì£¼ ì—°ì˜ˆì¸) â† 2.2.4
â”œâ”€â”€ Card 10: saju_insight_card.dart (ì‚¬ì£¼ ì¸ì‚¬ì´íŠ¸) â† 2.2.3
â”œâ”€â”€ Card 11: action_plan_card.dart (ì˜¤ëŠ˜ì˜ í–‰ë™)
â”œâ”€â”€ Card 12: five_elements_card.dart (ì˜¤í–‰)
â”œâ”€â”€ Card 13: hourly_score_graph_card.dart (ì‹œê°„ë³„ ê·¸ë˜í”„)
â”œâ”€â”€ Card 14: zodiac_fortune_card.dart (ë ë³„ ìš´ì„¸)
â”œâ”€â”€ Card 15: weekly_trend_card.dart (ì£¼ê°„ íŠ¸ë Œë“œ)
â””â”€â”€ Card 16: share_card.dart (ê³µìœ )
```

---

## ğŸ› ï¸ ì„¸ë¶€ ì„¤ê³„

### 2.2.1 ë¡œë”© ë¡œê³  ë¦¬ë‰´ì–¼

**í˜„ì¬ ìƒíƒœ**: `lib/screens/splash_screen.dart` ì¡´ì¬, ê¸°ë³¸ ë¡œê³  ì‚¬ìš©

**ë³€ê²½ ë°©ì•ˆ**:
- ìƒˆ ë¡œê³  ì—ì…‹ í•„ìš” (ë””ìì¸íŒ€ ì œê³µ ëŒ€ê¸°)
- ì§„í–‰ë¥  í‘œì‹œ ì• ë‹ˆë©”ì´ì…˜ ì¶”ê°€
- LLM í† í° ìƒì„± ì‹œ ë¡œë”© ìƒíƒœ ì—°ë™

**íŒŒì¼**: `lib/screens/splash_screen.dart`

```dart
// ë³€ê²½ ì˜ˆì‹œ
class SplashScreen extends ConsumerWidget {
  @override
  Widget build(BuildContext context, WidgetRef ref) {
    return Scaffold(
      body: Center(
        child: Column(
          mainAxisAlignment: MainAxisAlignment.center,
          children: [
            // ìƒˆ ë¡œê³  ì´ë¯¸ì§€ (ì—ì…‹ ëŒ€ê¸°)
            Image.asset('assets/images/logo_new.png', width: 120),
            const SizedBox(height: 24),
            // ë¡œë”© ì¸ë””ì¼€ì´í„°
            CircularProgressIndicator(
              valueColor: AlwaysStoppedAnimation(
                Theme.of(context).colorScheme.primary,
              ),
            ),
          ],
        ),
      ),
    );
  }
}
```

**ìƒíƒœ**: ì—ì…‹ ëŒ€ê¸° ì¤‘ - ìŠ¤í‚µ (ì¶”í›„ ì§„í–‰)

---

### 2.2.2 ê¸ˆì „ìš´/í•™ì—…ìš´ ì œëª© ì •ë ¬

**í˜„ì¬ íŒŒì¼**: `lib/screens/home/fortune_swipe/widgets/category_detail_card.dart`

**í˜„ì¬ ìƒíƒœ**: ì œëª©ì´ ì™¼ìª½ ì •ë ¬, ê¸´ í…ìŠ¤íŠ¸ ì‹œ ì¤„ë°”ê¿ˆ ë°œìƒ

**ë³€ê²½ ë°©ì•ˆ**:
- ì´ëª¨ì§€ + ì œëª© Rowë¥¼ Center ì •ë ¬
- ì ìˆ˜ í‘œì‹œ ì˜ì—­ë„ ê°€ìš´ë° ì •ë ¬

**ë³€ê²½ ì „**:
```dart
Row(
  children: [
    Text(emoji, style: ...),
    const SizedBox(width: 10),
    Expanded(
      child: Text(title, style: context.heading2),
    ),
  ],
)
```

**ë³€ê²½ í›„**:
```dart
Row(
  mainAxisAlignment: MainAxisAlignment.center,
  children: [
    Text(emoji, style: ...),
    const SizedBox(width: 10),
    Text(title, style: context.heading2),
  ],
)
```

---

### 2.2.3 ì‚¬ì£¼ ì¸ì‚¬ì´íŠ¸ í•œì í‘œê¸°

**í˜„ì¬ íŒŒì¼**: `lib/screens/home/fortune_swipe/widgets/saju_insight_card.dart`

**í˜„ì¬ ìƒíƒœ**:
- ì²œê°„ì§€ì§€ê°€ í•œê¸€ë¡œë§Œ í‘œì‹œ (ê°‘ì, ì„ì¶• ë“±)
- í•œì ìŠ¤íƒ€ì¼ë§ ì—†ìŒ

**ë³€ê²½ ë°©ì•ˆ**:
1. ì²œê°„/ì§€ì§€ í•œì ë§¤í•‘ í…Œì´ë¸” ì¶”ê°€
2. RichTextë¡œ í•œê¸€ + í•œì ë³‘ê¸°
3. í•œì í°íŠ¸ ìŠ¤íƒ€ì¼ë§ (ë” ì‘ì€ ì‚¬ì´ì¦ˆ, ì—°í•œ ìƒ‰ìƒ)

**í•œì ë§¤í•‘ í…Œì´ë¸”**:
```dart
/// ì²œê°„ í•œì ë§¤í•‘
const Map<String, String> heavenlyStemHanja = {
  'ê°‘': 'ç”²', 'ì„': 'ä¹™', 'ë³‘': 'ä¸™', 'ì •': 'ä¸', 'ë¬´': 'æˆŠ',
  'ê¸°': 'å·±', 'ê²½': 'åºš', 'ì‹ ': 'è¾›', 'ì„': 'å£¬', 'ê³„': 'ç™¸',
};

/// ì§€ì§€ í•œì ë§¤í•‘
const Map<String, String> earthlyBranchHanja = {
  'ì': 'å­', 'ì¶•': 'ä¸‘', 'ì¸': 'å¯…', 'ë¬˜': 'å¯', 'ì§„': 'è¾°', 'ì‚¬': 'å·³',
  'ì˜¤': 'åˆ', 'ë¯¸': 'æœª', 'ì‹ ': 'ç”³', 'ìœ ': 'é…‰', 'ìˆ ': 'æˆŒ', 'í•´': 'äº¥',
};
```

**UI ë³€ê²½**:
```dart
// ë³€ê²½ ì „
Text('ê°‘ì', style: context.heading3)

// ë³€ê²½ í›„
RichText(
  text: TextSpan(
    children: [
      TextSpan(
        text: 'ê°‘ì',
        style: context.heading3.copyWith(color: Colors.white),
      ),
      TextSpan(
        text: ' (ç”²å­)',
        style: context.bodySmall.copyWith(
          color: Colors.white.withValues(alpha: 0.7),
          fontSize: 12,
        ),
      ),
    ],
  ),
)
```

**ìƒˆ íŒŒì¼**: `lib/core/utils/hanja_utils.dart`
```dart
/// ì²œê°„ì§€ì§€ í•œì ë³€í™˜ ìœ í‹¸ë¦¬í‹°
class HanjaUtils {
  static const Map<String, String> _heavenlyStemHanja = {
    'ê°‘': 'ç”²', 'ì„': 'ä¹™', 'ë³‘': 'ä¸™', 'ì •': 'ä¸', 'ë¬´': 'æˆŠ',
    'ê¸°': 'å·±', 'ê²½': 'åºš', 'ì‹ ': 'è¾›', 'ì„': 'å£¬', 'ê³„': 'ç™¸',
  };

  static const Map<String, String> _earthlyBranchHanja = {
    'ì': 'å­', 'ì¶•': 'ä¸‘', 'ì¸': 'å¯…', 'ë¬˜': 'å¯', 'ì§„': 'è¾°', 'ì‚¬': 'å·³',
    'ì˜¤': 'åˆ', 'ë¯¸': 'æœª', 'ì‹ ': 'ç”³', 'ìœ ': 'é…‰', 'ìˆ ': 'æˆŒ', 'í•´': 'äº¥',
  };

  /// ì²œê°„ì§€ì§€ë¥¼ í•œìë¡œ ë³€í™˜ (ì˜ˆ: 'ê°‘ì' â†’ 'ç”²å­')
  static String toHanja(String koreanText) {
    if (koreanText.length != 2) return '';

    final stem = koreanText[0]; // ì²œê°„
    final branch = koreanText[1]; // ì§€ì§€

    final stemHanja = _heavenlyStemHanja[stem] ?? '';
    final branchHanja = _earthlyBranchHanja[branch] ?? '';

    return '$stemHanja$branchHanja';
  }

  /// í•œê¸€ + í•œì ë³‘ê¸° (ì˜ˆ: 'ê°‘ì' â†’ 'ê°‘ì(ç”²å­)')
  static String withHanja(String koreanText) {
    final hanja = toHanja(koreanText);
    if (hanja.isEmpty) return koreanText;
    return '$koreanText($hanja)';
  }
}
```

---

### 2.2.4 ë¹„ìŠ·í•œ ì‚¬ì£¼ ì—°ì˜ˆì¸ ê°œì„ 

**í˜„ì¬ íŒŒì¼**: `lib/screens/home/fortune_swipe/widgets/celebrity_card.dart`

**í˜„ì¬ ìƒíƒœ**:
- ëœë¤ ì—°ì˜ˆì¸ 3ëª… í‘œì‹œ
- ê¶í•©ë„ ê³„ì‚°ì´ ë‹¨ìˆœ (ìƒë…„ì›”ì¼ ê¸°ë°˜)
- í´ë°± ìºë¦­í„°: ì´ìˆœì‹ , ì„¸ì¢…ëŒ€ì™•, ì‹ ì‚¬ì„ë‹¹

**ê°œì„  ë°©ì•ˆ**:

1. **ì´ë¯¸ì§€ ì—ì…‹ ì¶”ê°€**
   - `assets/images/celebrities/` í´ë”ì— ì—°ì˜ˆì¸ ì´ë¯¸ì§€ ì¶”ê°€
   - ì´ë¯¸ì§€ê°€ ì—†ëŠ” ê²½ìš° ì´ë‹ˆì…œ ì•„ë°”íƒ€ í‘œì‹œ

2. **ê¶í•©ë„ ê³„ì‚° ê°œì„ **
   - ì˜¤í–‰ ê¸°ë°˜ ê¶í•© ì•Œê³ ë¦¬ì¦˜ ì ìš© (ê°€ëŠ¥í•œ ê²½ìš°)
   - í˜„ì¬ ë‹¨ìˆœ ê³„ì‚° ìœ ì§€í•˜ë˜ ë²”ìœ„ ì¡°ì •

3. **UI ê°œì„ **
   - ì¹´ë“œ ë””ìì¸ ì •ë¦¬
   - ì´ë¯¸ì§€ placeholder ê°œì„ 

**ë³€ê²½ ì½”ë“œ**:
```dart
// ì´ë¯¸ì§€ ìœ„ì ¯ ê°œì„ 
Widget _buildCelebrityImage(CelebritySaju celeb) {
  final imagePath = 'assets/images/celebrities/${celeb.id}.png';

  return ClipRRect(
    borderRadius: BorderRadius.circular(12),
    child: Image.asset(
      imagePath,
      width: 80,
      height: 80,
      fit: BoxFit.cover,
      errorBuilder: (context, error, stackTrace) {
        // ì´ë¯¸ì§€ ì—†ìœ¼ë©´ ì´ë‹ˆì…œ ì•„ë°”íƒ€
        return Container(
          width: 80,
          height: 80,
          decoration: BoxDecoration(
            color: Theme.of(context).colorScheme.primary.withValues(alpha: 0.1),
            borderRadius: BorderRadius.circular(12),
          ),
          child: Center(
            child: Text(
              celeb.name.substring(0, 1),
              style: context.heading2.copyWith(
                color: Theme.of(context).colorScheme.primary,
              ),
            ),
          ),
        );
      },
    ),
  );
}
```

**ìƒíƒœ**: ì—ì…‹ ëŒ€ê¸° ì¤‘ - ì½”ë“œë§Œ ì¤€ë¹„

---

### 2.2.5 ìš´ì„¸ ìŠ¤í¬ë¦½íŠ¸ í†¤ ë³€ê²½

**í˜„ì¬ íŒŒì¼**: `supabase/functions/calculate-saju/index.ts` (ë° ê¸°íƒ€ fortune Edge Functions)

**í˜„ì¬ ìƒíƒœ**: ê³ ì–´ì²´/ê²©ì‹ì²´ í†¤

**ë³€ê²½ ë°©ì•ˆ**: í”„ë¡¬í”„íŠ¸ì—ì„œ í†¤ ì§€ì‹œ ìˆ˜ì •

```typescript
// ë³€ê²½ ì „ (ì˜ˆì‹œ)
const systemPrompt = `ë‹¹ì‹ ì€ ì „ë¬¸ ì‚¬ì£¼ ë¶„ì„ê°€ì…ë‹ˆë‹¤. ì •ì¤‘í•˜ê³  ê²©ì‹ìˆëŠ” ë¬¸ì²´ë¡œ ë‹µë³€í•´ì£¼ì„¸ìš”.`;

// ë³€ê²½ í›„
const systemPrompt = `ë‹¹ì‹ ì€ ì¹œê·¼í•œ ì‚¬ì£¼ ë¶„ì„ê°€ì…ë‹ˆë‹¤.
í˜„ëŒ€ì ì´ê³  êµ¬ì–´ì²´ë¡œ ë‹µë³€í•´ì£¼ì„¸ìš”.
- ê²©ì‹ì²´ ëŒ€ì‹  ë°˜ë§ì´ë‚˜ ì¹œê·¼í•œ ì¡´ëŒ“ë§ ì‚¬ìš©
- ê³ ì–´ì²´/í•œë¬¸ í‘œí˜„ ìì œ
- ì¹œêµ¬ì—ê²Œ ì´ì•¼ê¸°í•˜ë“¯ í¸í•˜ê²Œ ì„¤ëª…`;
```

**ìƒíƒœ**: í”„ë¡¬í”„íŠ¸ í™•ì¸ í•„ìš” - ì¶”í›„ ì§„í–‰

---

## ğŸ“ íŒŒì¼ êµ¬ì¡°

```
lib/
â”œâ”€â”€ core/
â”‚   â””â”€â”€ utils/
â”‚       â””â”€â”€ hanja_utils.dart              # ìƒˆ íŒŒì¼: í•œì ë³€í™˜ ìœ í‹¸
â”œâ”€â”€ screens/
â”‚   â”œâ”€â”€ splash_screen.dart                # ìˆ˜ì •: ë¡œê³  ë¦¬ë‰´ì–¼ (ì—ì…‹ ëŒ€ê¸°)
â”‚   â””â”€â”€ home/
â”‚       â””â”€â”€ fortune_swipe/
â”‚           â””â”€â”€ widgets/
â”‚               â”œâ”€â”€ category_detail_card.dart  # ìˆ˜ì •: ì œëª© ì •ë ¬
â”‚               â”œâ”€â”€ saju_insight_card.dart     # ìˆ˜ì •: í•œì í‘œê¸°
â”‚               â””â”€â”€ celebrity_card.dart        # ìˆ˜ì •: ì´ë¯¸ì§€ ê°œì„ 

assets/
â””â”€â”€ images/
    â”œâ”€â”€ logo_new.png                      # ìƒˆ íŒŒì¼: ìƒˆ ë¡œê³  (ì—ì…‹ ëŒ€ê¸°)
    â””â”€â”€ celebrities/                      # ìƒˆ í´ë”: ì—°ì˜ˆì¸ ì´ë¯¸ì§€ (ì—ì…‹ ëŒ€ê¸°)
        â”œâ”€â”€ 1.png
        â”œâ”€â”€ 2.png
        â””â”€â”€ ...

supabase/functions/
â””â”€â”€ calculate-saju/
    â””â”€â”€ index.ts                          # ìˆ˜ì •: í”„ë¡¬í”„íŠ¸ í†¤ (ì¶”í›„)
```

---

## ğŸ“‹ êµ¬í˜„ ì²´í¬ë¦¬ìŠ¤íŠ¸

### ì¦‰ì‹œ êµ¬í˜„ ê°€ëŠ¥
- [ ] 2.2.2 ê¸ˆì „ìš´/í•™ì—…ìš´ ì œëª© ê°€ìš´ë° ì •ë ¬
- [ ] 2.2.3 ì‚¬ì£¼ ì¸ì‚¬ì´íŠ¸ í•œì í‘œê¸° ì¶”ê°€
- [ ] 2.2.4 ì—°ì˜ˆì¸ ì¹´ë“œ ì´ë¯¸ì§€ fallback ê°œì„ 

### ì—ì…‹/ì¶”ê°€ í™•ì¸ í•„ìš”
- [ ] 2.2.1 ë¡œë”© ë¡œê³  ë¦¬ë‰´ì–¼ (ìƒˆ ì—ì…‹ ëŒ€ê¸°)
- [ ] 2.2.4 ì—°ì˜ˆì¸ ì‹¤ì œ ì´ë¯¸ì§€ ì—ì…‹ (ì €ì‘ê¶Œ í™•ì¸ í•„ìš”)
- [ ] 2.2.5 ìš´ì„¸ ìŠ¤í¬ë¦½íŠ¸ í†¤ ë³€ê²½ (í”„ë¡¬í”„íŠ¸ ê²€í†  í•„ìš”)

---

## ğŸ§ª í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤

| ì‹œë‚˜ë¦¬ì˜¤ | í…ŒìŠ¤íŠ¸ ë°©ë²• | ì˜ˆìƒ ê²°ê³¼ |
|----------|------------|----------|
| ì œëª© ì •ë ¬ | ê¸ˆì „ìš´/í•™ì—…ìš´ ì¹´ë“œ í™•ì¸ | ì œëª©ì´ ê°€ìš´ë° ì •ë ¬ë¨ |
| í•œì í‘œê¸° | ì‚¬ì£¼ ì¸ì‚¬ì´íŠ¸ ì¹´ë“œ í™•ì¸ | ì²œê°„ì§€ì§€ì— í•œì ë³‘ê¸°ë¨ |
| ì—°ì˜ˆì¸ ì´ë¯¸ì§€ | ì´ë¯¸ì§€ ì—†ëŠ” ì—°ì˜ˆì¸ í‘œì‹œ | ì´ë‹ˆì…œ ì•„ë°”íƒ€ë¡œ ëŒ€ì²´ |

---

## ğŸ“Š ì˜í–¥ ë²”ìœ„

| íŒŒì¼ | ë³€ê²½ ë‚´ìš© | ì˜í–¥ë„ |
|------|----------|--------|
| hanja_utils.dart | ìƒˆ ìœ í‹¸ë¦¬í‹° | ë‚®ìŒ |
| category_detail_card.dart | ë ˆì´ì•„ì›ƒ ìˆ˜ì • | ë‚®ìŒ |
| saju_insight_card.dart | í•œì í‘œê¸° ì¶”ê°€ | ë‚®ìŒ |
| celebrity_card.dart | ì´ë¯¸ì§€ ì²˜ë¦¬ ê°œì„  | ë‚®ìŒ |

---

## ğŸ”® êµ¬í˜„ ìˆœì„œ (ê¶Œì¥)

1. **hanja_utils.dart** ìƒì„± (ì˜ì¡´ì„± ì—†ìŒ)
2. **saju_insight_card.dart** ìˆ˜ì • (í•œì í‘œê¸°)
3. **category_detail_card.dart** ìˆ˜ì • (ì œëª© ì •ë ¬)
4. **celebrity_card.dart** ìˆ˜ì • (ì´ë¯¸ì§€ fallback)
5. ì—ì…‹ ë„ì°© ì‹œ ë¡œê³ /ì—°ì˜ˆì¸ ì´ë¯¸ì§€ ì ìš©