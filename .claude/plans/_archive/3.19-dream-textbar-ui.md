# [3.19] í•´ëª½ í…ìŠ¤íŠ¸ë°” UI ê¸°íšì„œ

## 1. ìš”êµ¬ì‚¬í•­

| í•­ëª© | ì„¤ëª… | ë³µì¡ë„ |
|------|------|--------|
| 3.19.1 | í•´ëª½ í˜ì´ì§€ì— í…ìŠ¤íŠ¸ ì…ë ¥ë°” ì¶”ê°€ | ì¤‘ê°„ |
| 3.19.2 | ë²„ë¸” ì„ íƒê³¼ í…ìŠ¤íŠ¸ ì…ë ¥ ëª¨ë‘ ì§€ì› | ë‚®ìŒ |

---

## 2. í˜„í™© ë¶„ì„

### 2.1 í˜„ì¬ êµ¬í˜„

**ì…ë ¥ ë°©ì‹**: ë²„ë¸” ì„ íƒ ë°©ì‹ë§Œ ì§€ì›
- FloatingDreamBubbles: 15ê°œ ëœë¤ ê¿ˆ ì£¼ì œë¥¼ ë²„ë¸”ë¡œ í‘œì‹œ
- ì‚¬ìš©ìê°€ ë²„ë¸” í„°ì¹˜ â†’ ë°”ë¡œ í•´ëª½ ì‹œì‘
- ì§ì ‘ í…ìŠ¤íŠ¸ ì…ë ¥ ë¶ˆê°€

**ë¬¸ì œì **:
- ë‚´ê°€ ê¾¼ ê¿ˆì´ ë²„ë¸”ì— ì—†ìœ¼ë©´ ì„ íƒ ë¶ˆê°€
- êµ¬ì²´ì ì¸ ê¿ˆ ë‚´ìš© ì…ë ¥ ë¶ˆê°€
- ì‚¬ìš©ì ììœ ë„ ì œí•œ

### 2.2 ê´€ë ¨ íŒŒì¼
```
lib/features/interactive/presentation/pages/
â”œâ”€â”€ dream_interpretation_page.dart (í•´ëª½ ë©”ì¸ í˜ì´ì§€)
â””â”€â”€ dream_page.dart (êµ¬ë²„ì „)

lib/core/widgets/
â”œâ”€â”€ floating_dream_bubbles.dart (ë²„ë¸” ìœ„ì ¯)
â””â”€â”€ voice_input_text_field.dart (ìŒì„±/í…ìŠ¤íŠ¸ ì…ë ¥)

lib/data/
â””â”€â”€ popular_dream_topics.dart (ê¿ˆ ì£¼ì œ ë°ì´í„°)
```

### 2.3 í˜„ì¬ UI ë ˆì´ì•„ì›ƒ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [â†]    ê¿ˆ í•´ëª½           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  ğŸŒ™ ì–´ë–¤ ê¿ˆì„ ê¾¸ì…¨ë‚˜ìš”?     â”‚    â”‚ â† ìƒë‹¨ ì•ˆë‚´
â”‚  â”‚  ê¿ˆ ë²„ë¸”ì„ í„°ì¹˜í•˜ë©´...      â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                     â”‚
â”‚  â—‹ ë±€ê¿ˆ   â—‹ ëˆê¿ˆ   â—‹ ì¹˜ì•„ê¿ˆ       â”‚ â† í”Œë¡œíŒ… ë²„ë¸”ë“¤
â”‚     â—‹ ì£½ìŒê¿ˆ   â—‹ ê²°í˜¼ê¿ˆ           â”‚
â”‚  â—‹ ë¹„í–‰ê¿ˆ   â—‹ ì¶”ë½ê¿ˆ   â—‹ ë¬¼ê¿ˆ     â”‚
â”‚     â—‹ ë¶ˆê¿ˆ   â—‹ ë™ë¬¼ê¿ˆ             â”‚
â”‚                                     â”‚
â”‚  [ğŸ”„ ë‹¤ë¥¸ ê¿ˆ ë³´ê¸°]                  â”‚ â† ë²„ë¸” ìƒˆë¡œê³ ì¹¨
â”‚                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 3. ê°œì„  ë°©í–¥

### 3.1 ë””ìì¸ ì»¨ì…‰

**í•˜ì´ë¸Œë¦¬ë“œ ì…ë ¥ ë°©ì‹**:
- ë²„ë¸” ì„ íƒ: ë¹ ë¥¸ ì„ íƒ (ê¸°ì¡´ ìœ ì§€)
- í…ìŠ¤íŠ¸ ì…ë ¥: ììœ ë¡œìš´ ì…ë ¥ (ì‹ ê·œ ì¶”ê°€)
- ìŒì„± ì…ë ¥: VoiceInputTextField í™œìš© (ì„ íƒ)

### 3.2 ê°œì„  UI ë ˆì´ì•„ì›ƒ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [â†]    ê¿ˆ í•´ëª½                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  ğŸŒ™ ì–´ë–¤ ê¿ˆì„ ê¾¸ì…¨ë‚˜ìš”?     â”‚    â”‚
â”‚  â”‚  ë²„ë¸”ì„ ì„ íƒí•˜ê±°ë‚˜ ì§ì ‘ ì…ë ¥â”‚    â”‚ â† ì•ˆë‚´ ë¬¸êµ¬ ë³€ê²½
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                     â”‚
â”‚  â—‹ ë±€ê¿ˆ   â—‹ ëˆê¿ˆ   â—‹ ì¹˜ì•„ê¿ˆ       â”‚
â”‚     â—‹ ì£½ìŒê¿ˆ   â—‹ ê²°í˜¼ê¿ˆ           â”‚
â”‚  â—‹ ë¹„í–‰ê¿ˆ   â—‹ ì¶”ë½ê¿ˆ   â—‹ ë¬¼ê¿ˆ     â”‚
â”‚     â—‹ ë™ë¬¼ê¿ˆ   â—‹ ë¶ˆê¿ˆ             â”‚
â”‚                                     â”‚
â”‚  [ğŸ”„ ë‹¤ë¥¸ ê¿ˆ ë³´ê¸°]                  â”‚
â”‚                                     â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” [ğŸ¤] â”‚ â† í…ìŠ¤íŠ¸ ì…ë ¥ë°” ì¶”ê°€
â”‚ â”‚ ê¿ˆ ë‚´ìš©ì„ ì§ì ‘ ì…ë ¥í•´ì£¼ì„¸ìš”  â”‚ [â†’] â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 4. ìƒì„¸ êµ¬í˜„

### 4.1 í…ìŠ¤íŠ¸ ì…ë ¥ë°” ìœ„ì ¯

```dart
/// í•˜ë‹¨ í…ìŠ¤íŠ¸ ì…ë ¥ë°”
Widget _buildTextInputBar() {
  final isDark = Theme.of(context).brightness == Brightness.dark;

  return Positioned(
    bottom: 0,
    left: 0,
    right: 0,
    child: Container(
      padding: EdgeInsets.fromLTRB(16, 12, 16, MediaQuery.of(context).padding.bottom + 12),
      decoration: BoxDecoration(
        color: isDark
            ? TossDesignSystem.surfaceBackgroundDark
            : TossDesignSystem.white,
        boxShadow: [
          BoxShadow(
            color: Colors.black.withOpacity(0.1),
            blurRadius: 10,
            offset: Offset(0, -4),
          ),
        ],
      ),
      child: VoiceInputTextField(
        controller: _dreamTextController,
        onSubmit: _onTextSubmit,
        hintText: 'ê¿ˆ ë‚´ìš©ì„ ì§ì ‘ ì…ë ¥í•´ì£¼ì„¸ìš”',
        transcribingText: 'ë“£ê³  ìˆì–´ìš”...',
      ),
    ),
  );
}
```

### 4.2 í…ìŠ¤íŠ¸ ì…ë ¥ ì²˜ë¦¬

```dart
final TextEditingController _dreamTextController = TextEditingController();

/// í…ìŠ¤íŠ¸ ì…ë ¥ ì œì¶œ í•¸ë“¤ëŸ¬
void _onTextSubmit(String text) {
  if (text.trim().isEmpty) return;

  // ì»¤ìŠ¤í…€ DreamTopic ìƒì„±
  final customTopic = DreamTopic(
    id: 'custom_${DateTime.now().millisecondsSinceEpoch}',
    title: 'ì§ì ‘ ì…ë ¥í•œ ê¿ˆ',
    emoji: 'âœ¨',
    category: 'ê¸°íƒ€',
    dreamContentForApi: text.trim(),
  );

  _onTopicSelected(customTopic);
}
```

### 4.3 dream_interpretation_page.dart ìˆ˜ì •

**ë³€ê²½ ì „**:
```dart
Widget build(BuildContext context) {
  return Scaffold(
    body: SafeArea(
      bottom: false,
      child: Stack(
        children: [
          if (_showResult && _fortuneResult != null)
            _buildResultView(_fortuneResult!)
          else if (_isLoading)
            _buildLoadingView()
          else
            _buildBubbleSelectionView(),
          // ...
        ],
      ),
    ),
  );
}
```

**ë³€ê²½ í›„**:
```dart
Widget build(BuildContext context) {
  return Scaffold(
    body: SafeArea(
      bottom: false,
      child: Stack(
        children: [
          if (_showResult && _fortuneResult != null)
            _buildResultView(_fortuneResult!)
          else if (_isLoading)
            _buildLoadingView()
          else
            _buildBubbleSelectionView(),

          // âœ… í…ìŠ¤íŠ¸ ì…ë ¥ë°” ì¶”ê°€ (ì…ë ¥ í™”ë©´ì—ì„œë§Œ)
          if (!_showResult && !_isLoading)
            _buildTextInputBar(),

          // ...
        ],
      ),
    ),
  );
}
```

### 4.4 ì•ˆë‚´ ë¬¸êµ¬ ìˆ˜ì •

```dart
// ê¸°ì¡´
Text('ê¿ˆ ë²„ë¸”ì„ í„°ì¹˜í•˜ë©´ AIê°€ í•´ëª½í•´ë“œë ¤ìš”'),

// ë³€ê²½
Text('ë²„ë¸”ì„ ì„ íƒí•˜ê±°ë‚˜ ì•„ë˜ì— ì§ì ‘ ì…ë ¥í•´ì£¼ì„¸ìš”'),
```

### 4.5 ë²„ë¸” ì˜ì—­ íŒ¨ë”© ì¡°ì •

```dart
// FloatingDreamBubbles í•˜ë‹¨ ì—¬ë°± ì¶”ê°€
// availableHeight ê³„ì‚° ì‹œ í…ìŠ¤íŠ¸ ì…ë ¥ë°” ë†’ì´ ê³ ë ¤
final availableHeight = screenSize.height - 280 - 80; // 80: ì…ë ¥ë°” ë†’ì´
```

---

## 5. í•„ìš” ë³€ê²½ì‚¬í•­

### 5.1 DreamTopic ëª¨ë¸ í™•ì¥

í˜„ì¬ `popular_dream_topics.dart`ì˜ DreamTopicì´ ì»¤ìŠ¤í…€ ìƒì„±ì„ ì§€ì›í•˜ëŠ”ì§€ í™•ì¸ í•„ìš”:

```dart
class DreamTopic {
  final String id;
  final String title;
  final String emoji;
  final String category;
  final String dreamContentForApi;

  // ìƒì„±ìê°€ ëª¨ë“  í•„ë“œë¥¼ ë°›ì„ ìˆ˜ ìˆì–´ì•¼ í•¨
  const DreamTopic({
    required this.id,
    required this.title,
    required this.emoji,
    required this.category,
    required this.dreamContentForApi,
  });
}
```

### 5.2 Import ì¶”ê°€

```dart
import '../../../../core/widgets/voice_input_text_field.dart';
```

---

## 6. ì²´í¬ë¦¬ìŠ¤íŠ¸

- [ ] TextEditingController ì¶”ê°€ (_dreamTextController)
- [ ] _buildTextInputBar ìœ„ì ¯ êµ¬í˜„
- [ ] _onTextSubmit í•¸ë“¤ëŸ¬ êµ¬í˜„
- [ ] ì•ˆë‚´ ë¬¸êµ¬ ìˆ˜ì •
- [ ] FloatingDreamBubbles í•˜ë‹¨ ì—¬ë°± ì¡°ì •
- [ ] VoiceInputTextField import ì¶”ê°€
- [ ] dispose()ì—ì„œ controller dispose
- [ ] flutter analyze ê²€ì¦

---

## 7. ì˜ˆìƒ ì†Œìš” ì‹œê°„

| í•­ëª© | ì˜ˆìƒ ì‹œê°„ |
|------|----------|
| TextEditingController ì¶”ê°€ | 5ë¶„ |
| _buildTextInputBar êµ¬í˜„ | 20ë¶„ |
| _onTextSubmit í•¸ë“¤ëŸ¬ | 10ë¶„ |
| ì•ˆë‚´ ë¬¸êµ¬ ìˆ˜ì • | 5ë¶„ |
| ë²„ë¸” ì˜ì—­ ì¡°ì • | 10ë¶„ |
| í…ŒìŠ¤íŠ¸ | 10ë¶„ |
| **í•©ê³„** | **60ë¶„** |

---

## 8. ì•± ë‚´ ìœ ì‚¬ êµ¬í˜„ ì°¸ì¡°

### TalismanWishInput
```
lib/features/talisman/presentation/widgets/talisman_wish_input.dart
```
- VoiceInputTextField ì‚¬ìš© íŒ¨í„´
- ì¹´í…Œê³ ë¦¬ ì„ íƒ í›„ í…ìŠ¤íŠ¸ ì…ë ¥ UI
- validation ë¡œì§

### VoiceInputTextField
```
lib/core/widgets/voice_input_text_field.dart
```
- ChatGPT ìŠ¤íƒ€ì¼ ì…ë ¥ë°”
- ìŒì„± + í…ìŠ¤íŠ¸ ì…ë ¥ í†µí•©
- ìƒíƒœ ê´€ë¦¬ (idle, recording, transcribing, hasText)

### TarotQuestionSelector
```
lib/features/fortune/presentation/widgets/tarot/tarot_question_selector.dart
```
- ì„ íƒí˜• + ì…ë ¥í˜• í•˜ì´ë¸Œë¦¬ë“œ UI
- ì§ì ‘ ì…ë ¥ ì˜µì…˜

---

## 9. ì¶”ê°€ ê³ ë ¤ì‚¬í•­

### 9.1 UX ê°œì„  (ì„ íƒ)

**ì…ë ¥ ìµœì†Œ ê¸¸ì´**:
- ìµœì†Œ 5ì ì´ìƒ ì…ë ¥ í•„ìš” (TalismanWishInput ì°¸ê³ )
- ì…ë ¥ íŒ í‘œì‹œ: "êµ¬ì²´ì ìœ¼ë¡œ ì…ë ¥í• ìˆ˜ë¡ ì •í™•í•œ í•´ëª½ì´ ê°€ëŠ¥í•´ìš”"

**í”Œë ˆì´ìŠ¤í™€ë” ì˜ˆì‹œ**:
```dart
hintText: 'ì˜ˆ: í•˜ëŠ˜ì„ ë‚ ë‹¤ê°€ ë–¨ì–´ì§€ëŠ” ê¿ˆì„ ê¿¨ì–´ìš”'
```

### 9.2 í‚¤ë³´ë“œ ì²˜ë¦¬

- í‚¤ë³´ë“œê°€ ì˜¬ë¼ì˜¬ ë•Œ ë²„ë¸” ì˜ì—­ ì¶•ì†Œ
- ìŠ¤í¬ë¡¤ ê°€ëŠ¥í•˜ê²Œ ì²˜ë¦¬

---

**ì‘ì„±ì¼**: 2025-12-17