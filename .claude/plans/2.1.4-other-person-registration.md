# ì„¤ê³„ê³„íšì„œ: 2.1.4 ë‹¤ë¥¸ ì‚¬ëŒ ë“±ë¡ ë° í”„ë¡œí•„ ìŠ¤ìœ„ì¹­

## ğŸ“‹ ìš”êµ¬ì‚¬í•­ ìš”ì•½

### í•µì‹¬ ê¸°ëŠ¥
1. **ë‹¤ë¥¸ ì‚¬ëŒ ë“±ë¡**: ê°€ì¡±/ì¹œêµ¬ í”„ë¡œí•„ ì¶”ê°€ (ìƒë…„ì›”ì¼, ì´ë¦„, ì„±ë³„, ìŒë ¥ ì—¬ë¶€)
2. **í”„ë¡œí•„ ìŠ¤ìœ„ì¹­**: í”„ë¡œí•„ í™”ë©´ì—ì„œ í™œì„± í”„ë¡œí•„ ì „í™˜
3. **ìš´ì„¸ ì¡°íšŒ**: ë“±ë¡ëœ í”„ë¡œí•„ë¡œ ìš´ì„¸ ì¡°íšŒ ê°€ëŠ¥

### ì‚¬ìš©ì ì‹œë‚˜ë¦¬ì˜¤
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ì‹œë‚˜ë¦¬ì˜¤ 1: ë‹¤ë¥¸ ì‚¬ëŒ ë“±ë¡                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  1. í”„ë¡œí•„ í™”ë©´ â†’ "ë‹¤ë¥¸ ì‚¬ëŒ ì¶”ê°€" ë²„íŠ¼ í´ë¦­                    â”‚
â”‚  2. ë°”í…€ì‹œíŠ¸ì—ì„œ ì´ë¦„, ìƒë…„ì›”ì¼, ì„±ë³„, ìŒë ¥ì—¬ë¶€ ì…ë ¥             â”‚
â”‚  3. ì €ì¥ â†’ í”„ë¡œí•„ ëª©ë¡ì— ì¶”ê°€ë¨                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ì‹œë‚˜ë¦¬ì˜¤ 2: í”„ë¡œí•„ ìŠ¤ìœ„ì¹­                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  1. í”„ë¡œí•„ í™”ë©´ â†’ í”„ë¡œí•„ ì„ íƒ ì˜ì—­ í´ë¦­                        â”‚
â”‚  2. ë°”í…€ì‹œíŠ¸ì—ì„œ ë“±ë¡ëœ í”„ë¡œí•„ ëª©ë¡ í‘œì‹œ                        â”‚
â”‚  3. ë‹¤ë¥¸ í”„ë¡œí•„ ì„ íƒ â†’ í™œì„± í”„ë¡œí•„ ë³€ê²½                        â”‚
â”‚  4. í™ˆ í™”ë©´ ìš´ì„¸ê°€ í•´ë‹¹ í”„ë¡œí•„ ê¸°ì¤€ìœ¼ë¡œ í‘œì‹œ                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ì‹œë‚˜ë¦¬ì˜¤ 3: ìš´ì„¸ ì¡°íšŒ (ìŠ¤ìœ„ì¹­ ì—†ì´)                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  1. ìš´ì„¸ ìƒì„¸ í˜ì´ì§€ â†’ "ë‹¤ë¥¸ ì‚¬ëŒìœ¼ë¡œ ë³´ê¸°" ë²„íŠ¼                â”‚
â”‚  2. ë“±ë¡ëœ í”„ë¡œí•„ ëª©ë¡ì—ì„œ ì„ íƒ                                â”‚
â”‚  3. í•´ë‹¹ í”„ë¡œí•„ ê¸°ì¤€ìœ¼ë¡œ ìš´ì„¸ ê²°ê³¼ í‘œì‹œ                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š í˜„í™© ë¶„ì„

### í˜„ì¬ DB ìŠ¤í‚¤ë§ˆ
```sql
-- ê¸°ì¡´ user_profiles í…Œì´ë¸” (1:1 ê´€ê³„)
user_profiles (
  id UUID PRIMARY KEY REFERENCES auth.users(id),
  name TEXT,
  birth_date TEXT,           -- "1990-01-15"
  birth_time TEXT,           -- "14:30"
  gender TEXT,               -- "male" | "female"
  is_lunar BOOLEAN,          -- ìŒë ¥ ì—¬ë¶€
  zodiac_sign TEXT,
  is_premium BOOLEAN,
  created_at TIMESTAMP,
  updated_at TIMESTAMP
)
```

### í˜„ì¬ ëª¨ë¸ êµ¬ì¡°
```dart
// lib/data/models/user_profile.dart (ë©”ì¸)
class UserProfile extends Equatable {
  final String id;
  final String name;
  final String birthDate;
  final String? birthTime;
  final String gender;
  final bool isLunar;
  final String? zodiacSign;
  final bool isPremium;
}

// lib/models/user_profile.dart (ë ˆê±°ì‹œ - ì˜¨ë³´ë”©ì—ì„œ ì‚¬ìš©)
class UserProfile {
  final String id;
  final String name;
  final DateTime birthDate;
  final String? birthTime;
  final Gender gender;
  final bool isLunar;
}
```

### í˜„ì¬ Provider êµ¬ì¡°
```dart
// userProfileProvider - í˜„ì¬ ë¡œê·¸ì¸ëœ ì‚¬ìš©ìì˜ í”„ë¡œí•„
final userProfileProvider = StateNotifierProvider<UserProfileNotifier, UserProfile?>

// ìš´ì„¸ í˜ì´ì§€ì—ì„œ ì‚¬ìš©
final profile = ref.watch(userProfileProvider);
final conditions = FortuneConditions(
  birthDate: profile?.birthDate,
  birthTime: profile?.birthTime,
  gender: profile?.gender,
);
```

---

## ğŸ› ï¸ ì„¤ê³„ ë°©ì•ˆ

### Option A: ìƒˆ í…Œì´ë¸” ì¶”ê°€ (ê¶Œì¥)

**ìƒˆ í…Œì´ë¸”**: `secondary_profiles`

```sql
CREATE TABLE secondary_profiles (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  owner_id UUID NOT NULL REFERENCES auth.users(id) ON DELETE CASCADE,
  name TEXT NOT NULL,
  birth_date TEXT NOT NULL,      -- "1990-01-15"
  birth_time TEXT,               -- "14:30" (ì„ íƒ)
  gender TEXT NOT NULL,          -- "male" | "female"
  is_lunar BOOLEAN DEFAULT FALSE,
  relationship TEXT,             -- "family" | "friend" | "other"
  avatar_index INT DEFAULT 0,    -- ì•„ë°”íƒ€ ì´ë¯¸ì§€ ì¸ë±ìŠ¤
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW()
);

-- RLS ì •ì±…
ALTER TABLE secondary_profiles ENABLE ROW LEVEL SECURITY;

CREATE POLICY "Users can view own secondary profiles"
  ON secondary_profiles FOR SELECT
  USING (auth.uid() = owner_id);

CREATE POLICY "Users can insert own secondary profiles"
  ON secondary_profiles FOR INSERT
  WITH CHECK (auth.uid() = owner_id);

CREATE POLICY "Users can update own secondary profiles"
  ON secondary_profiles FOR UPDATE
  USING (auth.uid() = owner_id);

CREATE POLICY "Users can delete own secondary profiles"
  ON secondary_profiles FOR DELETE
  USING (auth.uid() = owner_id);

-- ì¸ë±ìŠ¤
CREATE INDEX idx_secondary_profiles_owner ON secondary_profiles(owner_id);

-- ìµœëŒ€ ê°œìˆ˜ ì œí•œ (5ê°œ)
CREATE OR REPLACE FUNCTION check_secondary_profile_limit()
RETURNS TRIGGER AS $$
BEGIN
  IF (SELECT COUNT(*) FROM secondary_profiles WHERE owner_id = NEW.owner_id) >= 5 THEN
    RAISE EXCEPTION 'Maximum 5 secondary profiles allowed per user';
  END IF;
  RETURN NEW;
END;
$$ LANGUAGE plpgsql;

CREATE TRIGGER enforce_secondary_profile_limit
  BEFORE INSERT ON secondary_profiles
  FOR EACH ROW EXECUTE FUNCTION check_secondary_profile_limit();
```

**ì¥ì **:
- ê¸°ì¡´ `user_profiles` ë¡œì§ ë³€ê²½ ì—†ìŒ
- ëª…í™•í•œ ê´€ì‹¬ì‚¬ ë¶„ë¦¬
- í™•ì¥ ê°€ëŠ¥í•œ êµ¬ì¡° (relationship, avatar ë“±)

**ë‹¨ì **:
- ìƒˆ í…Œì´ë¸” ê´€ë¦¬ í•„ìš”

---

### Option B: ê¸°ì¡´ í…Œì´ë¸” í™•ì¥

`user_profiles`ì— `owner_id` ì»¬ëŸ¼ ì¶”ê°€í•˜ì—¬ 1:N ê´€ê³„ë¡œ ë³€ê²½

**ë‹¨ì **: ê¸°ì¡´ ì½”ë“œ ëŒ€ê·œëª¨ ìˆ˜ì • í•„ìš”, ë§ˆì´ê·¸ë ˆì´ì…˜ ë³µì¡

â†’ **Option A ì„ íƒ**

---

## ğŸ“ íŒŒì¼ êµ¬ì¡°

```
lib/
â”œâ”€â”€ data/
â”‚   â””â”€â”€ models/
â”‚       â””â”€â”€ secondary_profile.dart          # ìƒˆ ëª¨ë¸
â”œâ”€â”€ presentation/
â”‚   â””â”€â”€ providers/
â”‚       â”œâ”€â”€ secondary_profiles_provider.dart  # ìƒˆ Provider
â”‚       â””â”€â”€ active_profile_provider.dart      # í™œì„± í”„ë¡œí•„ Provider
â”œâ”€â”€ screens/
â”‚   â””â”€â”€ profile/
â”‚       â”œâ”€â”€ profile_screen.dart             # ìˆ˜ì •: í”„ë¡œí•„ ìŠ¤ìœ„ì²˜ ì¶”ê°€
â”‚       â”œâ”€â”€ widgets/
â”‚       â”‚   â”œâ”€â”€ profile_switcher_card.dart  # ìƒˆ ìœ„ì ¯: í”„ë¡œí•„ ì„ íƒ ì¹´ë“œ
â”‚       â”‚   â”œâ”€â”€ add_profile_sheet.dart      # ìƒˆ ìœ„ì ¯: í”„ë¡œí•„ ì¶”ê°€ ë°”í…€ì‹œíŠ¸
â”‚       â”‚   â””â”€â”€ profile_list_sheet.dart     # ìƒˆ ìœ„ì ¯: í”„ë¡œí•„ ëª©ë¡ ë°”í…€ì‹œíŠ¸
â”‚       â””â”€â”€ secondary_profile_edit_page.dart # ìƒˆ í˜ì´ì§€: ì„œë¸Œ í”„ë¡œí•„ ìˆ˜ì •
â””â”€â”€ core/
    â””â”€â”€ utils/
        â””â”€â”€ supabase_helper.dart            # ìˆ˜ì •: CRUD ë©”ì„œë“œ ì¶”ê°€

supabase/
â””â”€â”€ migrations/
    â””â”€â”€ YYYYMMDD_create_secondary_profiles.sql
```

---

## ğŸ”§ êµ¬í˜„ ìƒì„¸

### 1ë‹¨ê³„: DB ë§ˆì´ê·¸ë ˆì´ì…˜

**íŒŒì¼**: `supabase/migrations/YYYYMMDD_create_secondary_profiles.sql`

ìœ„ì˜ SQL ìŠ¤í‚¤ë§ˆ ì ìš©

---

### 2ë‹¨ê³„: ëª¨ë¸ ì •ì˜

**íŒŒì¼**: `lib/data/models/secondary_profile.dart`

```dart
import 'package:equatable/equatable.dart';

/// ë‹¤ë¥¸ ì‚¬ëŒ í”„ë¡œí•„ (ê°€ì¡±/ì¹œêµ¬)
class SecondaryProfile extends Equatable {
  final String id;
  final String ownerId;
  final String name;
  final String birthDate;      // "1990-01-15"
  final String? birthTime;     // "14:30"
  final String gender;         // "male" | "female"
  final bool isLunar;
  final String? relationship;  // "family" | "friend" | "other"
  final int avatarIndex;
  final DateTime createdAt;
  final DateTime updatedAt;

  const SecondaryProfile({
    required this.id,
    required this.ownerId,
    required this.name,
    required this.birthDate,
    this.birthTime,
    required this.gender,
    this.isLunar = false,
    this.relationship,
    this.avatarIndex = 0,
    required this.createdAt,
    required this.updatedAt,
  });

  factory SecondaryProfile.fromJson(Map<String, dynamic> json) {
    return SecondaryProfile(
      id: json['id'] as String,
      ownerId: json['owner_id'] as String,
      name: json['name'] as String,
      birthDate: json['birth_date'] as String,
      birthTime: json['birth_time'] as String?,
      gender: json['gender'] as String,
      isLunar: json['is_lunar'] as bool? ?? false,
      relationship: json['relationship'] as String?,
      avatarIndex: json['avatar_index'] as int? ?? 0,
      createdAt: DateTime.parse(json['created_at'] as String),
      updatedAt: DateTime.parse(json['updated_at'] as String),
    );
  }

  Map<String, dynamic> toJson() {
    return {
      'id': id,
      'owner_id': ownerId,
      'name': name,
      'birth_date': birthDate,
      'birth_time': birthTime,
      'gender': gender,
      'is_lunar': isLunar,
      'relationship': relationship,
      'avatar_index': avatarIndex,
    };
  }

  /// ìš´ì„¸ ì¡°íšŒìš© FortuneConditions ë³€í™˜ì— í•„ìš”í•œ í•„ë“œ ì¶”ì¶œ
  Map<String, dynamic> toFortuneParams() {
    return {
      'birthDate': birthDate,
      'birthTime': birthTime,
      'gender': gender,
      'isLunar': isLunar,
    };
  }

  @override
  List<Object?> get props => [id, ownerId, name, birthDate, birthTime, gender, isLunar];
}
```

---

### 3ë‹¨ê³„: Provider êµ¬í˜„

**íŒŒì¼**: `lib/presentation/providers/secondary_profiles_provider.dart`

```dart
import 'package:flutter_riverpod/flutter_riverpod.dart';
import 'package:supabase_flutter/supabase_flutter.dart';
import 'dart:developer' as developer;

import '../../data/models/secondary_profile.dart';

/// ì„œë¸Œ í”„ë¡œí•„ ëª©ë¡ Provider
final secondaryProfilesProvider = StateNotifierProvider<
    SecondaryProfilesNotifier, AsyncValue<List<SecondaryProfile>>>((ref) {
  return SecondaryProfilesNotifier();
});

class SecondaryProfilesNotifier
    extends StateNotifier<AsyncValue<List<SecondaryProfile>>> {
  SecondaryProfilesNotifier() : super(const AsyncValue.loading()) {
    _loadProfiles();
  }

  final _supabase = Supabase.instance.client;

  Future<void> _loadProfiles() async {
    try {
      final userId = _supabase.auth.currentUser?.id;
      if (userId == null) {
        state = const AsyncValue.data([]);
        return;
      }

      final response = await _supabase
          .from('secondary_profiles')
          .select()
          .eq('owner_id', userId)
          .order('created_at', ascending: true);

      final profiles = (response as List)
          .map((json) => SecondaryProfile.fromJson(json))
          .toList();

      state = AsyncValue.data(profiles);
      developer.log('âœ… ì„œë¸Œ í”„ë¡œí•„ ${profiles.length}ê°œ ë¡œë“œ');
    } catch (e, st) {
      developer.log('âŒ ì„œë¸Œ í”„ë¡œí•„ ë¡œë“œ ì‹¤íŒ¨: $e');
      state = AsyncValue.error(e, st);
    }
  }

  /// í”„ë¡œí•„ ì¶”ê°€
  Future<SecondaryProfile?> addProfile({
    required String name,
    required String birthDate,
    String? birthTime,
    required String gender,
    bool isLunar = false,
    String? relationship,
  }) async {
    try {
      final userId = _supabase.auth.currentUser?.id;
      if (userId == null) throw Exception('ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤');

      final response = await _supabase.from('secondary_profiles').insert({
        'owner_id': userId,
        'name': name,
        'birth_date': birthDate,
        'birth_time': birthTime,
        'gender': gender,
        'is_lunar': isLunar,
        'relationship': relationship,
      }).select().single();

      final newProfile = SecondaryProfile.fromJson(response);

      state = state.whenData((profiles) => [...profiles, newProfile]);
      developer.log('âœ… ì„œë¸Œ í”„ë¡œí•„ ì¶”ê°€: ${newProfile.name}');
      return newProfile;
    } catch (e) {
      developer.log('âŒ ì„œë¸Œ í”„ë¡œí•„ ì¶”ê°€ ì‹¤íŒ¨: $e');
      rethrow;
    }
  }

  /// í”„ë¡œí•„ ìˆ˜ì •
  Future<void> updateProfile(SecondaryProfile profile) async {
    try {
      await _supabase
          .from('secondary_profiles')
          .update(profile.toJson())
          .eq('id', profile.id);

      state = state.whenData((profiles) =>
          profiles.map((p) => p.id == profile.id ? profile : p).toList());
      developer.log('âœ… ì„œë¸Œ í”„ë¡œí•„ ìˆ˜ì •: ${profile.name}');
    } catch (e) {
      developer.log('âŒ ì„œë¸Œ í”„ë¡œí•„ ìˆ˜ì • ì‹¤íŒ¨: $e');
      rethrow;
    }
  }

  /// í”„ë¡œí•„ ì‚­ì œ
  Future<void> deleteProfile(String profileId) async {
    try {
      await _supabase
          .from('secondary_profiles')
          .delete()
          .eq('id', profileId);

      state = state.whenData(
          (profiles) => profiles.where((p) => p.id != profileId).toList());
      developer.log('âœ… ì„œë¸Œ í”„ë¡œí•„ ì‚­ì œ');
    } catch (e) {
      developer.log('âŒ ì„œë¸Œ í”„ë¡œí•„ ì‚­ì œ ì‹¤íŒ¨: $e');
      rethrow;
    }
  }

  /// ìƒˆë¡œê³ ì¹¨
  Future<void> refresh() => _loadProfiles();
}
```

**íŒŒì¼**: `lib/presentation/providers/active_profile_provider.dart`

```dart
import 'package:flutter_riverpod/flutter_riverpod.dart';

import '../../data/models/secondary_profile.dart';
import '../../data/models/user_profile.dart';
import 'auth_provider.dart';

/// í™œì„± í”„ë¡œí•„ íƒ€ì…
enum ActiveProfileType { primary, secondary }

/// í™œì„± í”„ë¡œí•„ ìƒíƒœ
class ActiveProfileState {
  final ActiveProfileType type;
  final String? secondaryProfileId;

  const ActiveProfileState({
    this.type = ActiveProfileType.primary,
    this.secondaryProfileId,
  });

  bool get isPrimary => type == ActiveProfileType.primary;
  bool get isSecondary => type == ActiveProfileType.secondary;

  ActiveProfileState copyWith({
    ActiveProfileType? type,
    String? secondaryProfileId,
  }) {
    return ActiveProfileState(
      type: type ?? this.type,
      secondaryProfileId: secondaryProfileId ?? this.secondaryProfileId,
    );
  }
}

/// í™œì„± í”„ë¡œí•„ Provider (ì–´ë–¤ í”„ë¡œí•„ë¡œ ìš´ì„¸ë¥¼ ë³¼ì§€ ê²°ì •)
final activeProfileProvider =
    StateNotifierProvider<ActiveProfileNotifier, ActiveProfileState>((ref) {
  return ActiveProfileNotifier();
});

class ActiveProfileNotifier extends StateNotifier<ActiveProfileState> {
  ActiveProfileNotifier() : super(const ActiveProfileState());

  /// ë³¸ì¸ í”„ë¡œí•„ë¡œ ì „í™˜
  void switchToPrimary() {
    state = const ActiveProfileState(type: ActiveProfileType.primary);
  }

  /// ì„œë¸Œ í”„ë¡œí•„ë¡œ ì „í™˜
  void switchToSecondary(String profileId) {
    state = ActiveProfileState(
      type: ActiveProfileType.secondary,
      secondaryProfileId: profileId,
    );
  }
}

/// í˜„ì¬ í™œì„± í”„ë¡œí•„ì˜ ìš´ì„¸ íŒŒë¼ë¯¸í„° ê°€ì ¸ì˜¤ê¸°
extension ActiveProfileExtension on WidgetRef {
  /// ìš´ì„¸ ì¡°íšŒìš© íŒŒë¼ë¯¸í„° (í™œì„± í”„ë¡œí•„ ê¸°ì¤€)
  Map<String, dynamic>? get activeFortuneParams {
    final activeState = watch(activeProfileProvider);

    if (activeState.isPrimary) {
      final profile = watch(userProfileProvider);
      if (profile == null) return null;
      return {
        'birthDate': profile.birthDate,
        'birthTime': profile.birthTime,
        'gender': profile.gender,
        'isLunar': profile.isLunar,
      };
    } else {
      final secondaryProfiles = watch(secondaryProfilesProvider);
      return secondaryProfiles.whenOrNull(
        data: (profiles) {
          final profile = profiles.firstWhere(
            (p) => p.id == activeState.secondaryProfileId,
            orElse: () => profiles.first,
          );
          return profile.toFortuneParams();
        },
      );
    }
  }

  /// í™œì„± í”„ë¡œí•„ ì´ë¦„
  String get activeProfileName {
    final activeState = watch(activeProfileProvider);

    if (activeState.isPrimary) {
      return watch(userProfileProvider)?.name ?? 'ë‚˜';
    } else {
      final secondaryProfiles = watch(secondaryProfilesProvider);
      return secondaryProfiles.whenOrNull(
        data: (profiles) {
          final profile = profiles.firstWhere(
            (p) => p.id == activeState.secondaryProfileId,
            orElse: () => profiles.first,
          );
          return profile.name;
        },
      ) ?? 'í”„ë¡œí•„';
    }
  }
}
```

---

### 4ë‹¨ê³„: UI ìœ„ì ¯

**íŒŒì¼**: `lib/screens/profile/widgets/profile_switcher_card.dart`

```dart
import 'package:flutter/material.dart';
import 'package:flutter_riverpod/flutter_riverpod.dart';

import '../../../core/design_system/theme/theme_extension.dart';
import '../../../presentation/providers/active_profile_provider.dart';
import '../../../presentation/providers/auth_provider.dart';
import '../../../presentation/providers/secondary_profiles_provider.dart';
import 'profile_list_sheet.dart';

/// í”„ë¡œí•„ ìŠ¤ìœ„ì²˜ ì¹´ë“œ (í”„ë¡œí•„ í™”ë©´ ìƒë‹¨)
class ProfileSwitcherCard extends ConsumerWidget {
  const ProfileSwitcherCard({super.key});

  @override
  Widget build(BuildContext context, WidgetRef ref) {
    final colors = context.colors;
    final activeState = ref.watch(activeProfileProvider);
    final primaryProfile = ref.watch(userProfileProvider);
    final secondaryProfiles = ref.watch(secondaryProfilesProvider);

    final profileCount = 1 + (secondaryProfiles.valueOrNull?.length ?? 0);

    return GestureDetector(
      onTap: () => _showProfileList(context),
      child: Container(
        padding: const EdgeInsets.all(16),
        decoration: BoxDecoration(
          color: colors.surface,
          borderRadius: BorderRadius.circular(16),
          border: Border.all(color: colors.border),
        ),
        child: Row(
          children: [
            // ì•„ë°”íƒ€
            CircleAvatar(
              radius: 24,
              backgroundColor: colors.primary.withOpacity(0.1),
              child: Text(
                activeState.isPrimary
                    ? (primaryProfile?.name.substring(0, 1) ?? 'ë‚˜')
                    : _getSecondaryInitial(ref),
                style: context.heading3.copyWith(color: colors.primary),
              ),
            ),
            const SizedBox(width: 12),

            // ì´ë¦„ & í”„ë¡œí•„ ê°œìˆ˜
            Expanded(
              child: Column(
                crossAxisAlignment: CrossAxisAlignment.start,
                children: [
                  Text(
                    ref.activeProfileName,
                    style: context.heading3,
                  ),
                  Text(
                    'í”„ë¡œí•„ $profileCountê°œ',
                    style: context.body2.copyWith(color: colors.textSecondary),
                  ),
                ],
              ),
            ),

            // ë“œë¡­ë‹¤ìš´ ì•„ì´ì½˜
            Icon(
              Icons.keyboard_arrow_down_rounded,
              color: colors.textSecondary,
            ),
          ],
        ),
      ),
    );
  }

  String _getSecondaryInitial(WidgetRef ref) {
    final activeState = ref.watch(activeProfileProvider);
    final secondaryProfiles = ref.watch(secondaryProfilesProvider);

    return secondaryProfiles.whenOrNull(
          data: (profiles) {
            final profile = profiles.firstWhere(
              (p) => p.id == activeState.secondaryProfileId,
              orElse: () => profiles.first,
            );
            return profile.name.substring(0, 1);
          },
        ) ??
        '?';
  }

  void _showProfileList(BuildContext context) {
    showModalBottomSheet(
      context: context,
      isScrollControlled: true,
      backgroundColor: Colors.transparent,
      builder: (_) => const ProfileListSheet(),
    );
  }
}
```

**íŒŒì¼**: `lib/screens/profile/widgets/profile_list_sheet.dart`

```dart
import 'package:flutter/material.dart';
import 'package:flutter_riverpod/flutter_riverpod.dart';

import '../../../core/design_system/theme/theme_extension.dart';
import '../../../presentation/providers/active_profile_provider.dart';
import '../../../presentation/providers/auth_provider.dart';
import '../../../presentation/providers/secondary_profiles_provider.dart';
import 'add_profile_sheet.dart';

/// í”„ë¡œí•„ ëª©ë¡ ë°”í…€ì‹œíŠ¸
class ProfileListSheet extends ConsumerWidget {
  const ProfileListSheet({super.key});

  @override
  Widget build(BuildContext context, WidgetRef ref) {
    final colors = context.colors;
    final activeState = ref.watch(activeProfileProvider);
    final primaryProfile = ref.watch(userProfileProvider);
    final secondaryProfiles = ref.watch(secondaryProfilesProvider);

    return Container(
      decoration: BoxDecoration(
        color: colors.background,
        borderRadius: const BorderRadius.vertical(top: Radius.circular(20)),
      ),
      child: SafeArea(
        child: Column(
          mainAxisSize: MainAxisSize.min,
          children: [
            // í•¸ë“¤ë°”
            Container(
              margin: const EdgeInsets.only(top: 12),
              width: 40,
              height: 4,
              decoration: BoxDecoration(
                color: colors.border,
                borderRadius: BorderRadius.circular(2),
              ),
            ),

            // íƒ€ì´í‹€
            Padding(
              padding: const EdgeInsets.all(20),
              child: Row(
                mainAxisAlignment: MainAxisAlignment.spaceBetween,
                children: [
                  Text('í”„ë¡œí•„ ì„ íƒ', style: context.heading2),
                  TextButton.icon(
                    onPressed: () => _showAddProfile(context),
                    icon: const Icon(Icons.add, size: 18),
                    label: const Text('ì¶”ê°€'),
                  ),
                ],
              ),
            ),

            // ë³¸ì¸ í”„ë¡œí•„
            _ProfileListTile(
              name: primaryProfile?.name ?? 'ë‚˜',
              subtitle: 'ë³¸ì¸',
              isSelected: activeState.isPrimary,
              onTap: () {
                ref.read(activeProfileProvider.notifier).switchToPrimary();
                Navigator.pop(context);
              },
            ),

            // êµ¬ë¶„ì„ 
            const Divider(),

            // ì„œë¸Œ í”„ë¡œí•„ ëª©ë¡
            secondaryProfiles.when(
              data: (profiles) {
                if (profiles.isEmpty) {
                  return Padding(
                    padding: const EdgeInsets.all(20),
                    child: Text(
                      'ë“±ë¡ëœ ë‹¤ë¥¸ í”„ë¡œí•„ì´ ì—†ìŠµë‹ˆë‹¤',
                      style: context.body2.copyWith(color: colors.textSecondary),
                    ),
                  );
                }
                return ListView.builder(
                  shrinkWrap: true,
                  physics: const NeverScrollableScrollPhysics(),
                  itemCount: profiles.length,
                  itemBuilder: (context, index) {
                    final profile = profiles[index];
                    return _ProfileListTile(
                      name: profile.name,
                      subtitle: profile.relationship ?? 'ê¸°íƒ€',
                      isSelected: activeState.isSecondary &&
                          activeState.secondaryProfileId == profile.id,
                      onTap: () {
                        ref
                            .read(activeProfileProvider.notifier)
                            .switchToSecondary(profile.id);
                        Navigator.pop(context);
                      },
                      onLongPress: () => _showProfileOptions(context, ref, profile.id),
                    );
                  },
                );
              },
              loading: () => const Padding(
                padding: EdgeInsets.all(20),
                child: CircularProgressIndicator(),
              ),
              error: (e, _) => Padding(
                padding: const EdgeInsets.all(20),
                child: Text('ì˜¤ë¥˜: $e'),
              ),
            ),

            const SizedBox(height: 20),
          ],
        ),
      ),
    );
  }

  void _showAddProfile(BuildContext context) {
    Navigator.pop(context);
    showModalBottomSheet(
      context: context,
      isScrollControlled: true,
      backgroundColor: Colors.transparent,
      builder: (_) => const AddProfileSheet(),
    );
  }

  void _showProfileOptions(BuildContext context, WidgetRef ref, String profileId) {
    showModalBottomSheet(
      context: context,
      builder: (_) => SafeArea(
        child: Column(
          mainAxisSize: MainAxisSize.min,
          children: [
            ListTile(
              leading: const Icon(Icons.edit),
              title: const Text('ìˆ˜ì •'),
              onTap: () {
                Navigator.pop(context);
                // TODO: ìˆ˜ì • í˜ì´ì§€ë¡œ ì´ë™
              },
            ),
            ListTile(
              leading: const Icon(Icons.delete, color: Colors.red),
              title: const Text('ì‚­ì œ', style: TextStyle(color: Colors.red)),
              onTap: () async {
                Navigator.pop(context);
                await ref
                    .read(secondaryProfilesProvider.notifier)
                    .deleteProfile(profileId);
              },
            ),
          ],
        ),
      ),
    );
  }
}

class _ProfileListTile extends StatelessWidget {
  final String name;
  final String subtitle;
  final bool isSelected;
  final VoidCallback onTap;
  final VoidCallback? onLongPress;

  const _ProfileListTile({
    required this.name,
    required this.subtitle,
    required this.isSelected,
    required this.onTap,
    this.onLongPress,
  });

  @override
  Widget build(BuildContext context) {
    final colors = context.colors;

    return ListTile(
      leading: CircleAvatar(
        backgroundColor: isSelected
            ? colors.primary
            : colors.primary.withOpacity(0.1),
        child: Text(
          name.substring(0, 1),
          style: TextStyle(
            color: isSelected ? Colors.white : colors.primary,
            fontWeight: FontWeight.bold,
          ),
        ),
      ),
      title: Text(name),
      subtitle: Text(subtitle),
      trailing: isSelected
          ? Icon(Icons.check_circle, color: colors.primary)
          : null,
      onTap: onTap,
      onLongPress: onLongPress,
    );
  }
}
```

**íŒŒì¼**: `lib/screens/profile/widgets/add_profile_sheet.dart`

```dart
import 'package:flutter/material.dart';
import 'package:flutter_riverpod/flutter_riverpod.dart';

import '../../../core/design_system/theme/theme_extension.dart';
import '../../../presentation/providers/secondary_profiles_provider.dart';
import '../../../shared/components/birth_date_picker.dart';
import '../../../shared/components/gender_selector.dart';

/// í”„ë¡œí•„ ì¶”ê°€ ë°”í…€ì‹œíŠ¸
class AddProfileSheet extends ConsumerStatefulWidget {
  const AddProfileSheet({super.key});

  @override
  ConsumerState<AddProfileSheet> createState() => _AddProfileSheetState();
}

class _AddProfileSheetState extends ConsumerState<AddProfileSheet> {
  final _nameController = TextEditingController();
  String? _birthDate;
  String? _birthTime;
  String _gender = 'male';
  bool _isLunar = false;
  String _relationship = 'family';
  bool _isLoading = false;

  @override
  void dispose() {
    _nameController.dispose();
    super.dispose();
  }

  bool get _isValid =>
      _nameController.text.isNotEmpty && _birthDate != null;

  @override
  Widget build(BuildContext context) {
    final colors = context.colors;

    return Container(
      padding: EdgeInsets.only(
        bottom: MediaQuery.of(context).viewInsets.bottom,
      ),
      decoration: BoxDecoration(
        color: colors.background,
        borderRadius: const BorderRadius.vertical(top: Radius.circular(20)),
      ),
      child: SafeArea(
        child: SingleChildScrollView(
          padding: const EdgeInsets.all(20),
          child: Column(
            crossAxisAlignment: CrossAxisAlignment.start,
            mainAxisSize: MainAxisSize.min,
            children: [
              // í•¸ë“¤ë°”
              Center(
                child: Container(
                  width: 40,
                  height: 4,
                  decoration: BoxDecoration(
                    color: colors.border,
                    borderRadius: BorderRadius.circular(2),
                  ),
                ),
              ),
              const SizedBox(height: 20),

              // íƒ€ì´í‹€
              Text('ë‹¤ë¥¸ ì‚¬ëŒ ì¶”ê°€', style: context.heading2),
              const SizedBox(height: 8),
              Text(
                'ê°€ì¡±ì´ë‚˜ ì¹œêµ¬ì˜ ìš´ì„¸ë¥¼ í™•ì¸í•  ìˆ˜ ìˆì–´ìš”',
                style: context.body2.copyWith(color: colors.textSecondary),
              ),
              const SizedBox(height: 24),

              // ì´ë¦„ ì…ë ¥
              TextField(
                controller: _nameController,
                decoration: InputDecoration(
                  labelText: 'ì´ë¦„',
                  hintText: 'ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”',
                  border: OutlineInputBorder(
                    borderRadius: BorderRadius.circular(12),
                  ),
                ),
                onChanged: (_) => setState(() {}),
              ),
              const SizedBox(height: 16),

              // ê´€ê³„ ì„ íƒ
              Text('ê´€ê³„', style: context.body1.copyWith(fontWeight: FontWeight.w600)),
              const SizedBox(height: 8),
              Row(
                children: [
                  _RelationshipChip(
                    label: 'ê°€ì¡±',
                    value: 'family',
                    selected: _relationship == 'family',
                    onTap: () => setState(() => _relationship = 'family'),
                  ),
                  const SizedBox(width: 8),
                  _RelationshipChip(
                    label: 'ì¹œêµ¬',
                    value: 'friend',
                    selected: _relationship == 'friend',
                    onTap: () => setState(() => _relationship = 'friend'),
                  ),
                  const SizedBox(width: 8),
                  _RelationshipChip(
                    label: 'ê¸°íƒ€',
                    value: 'other',
                    selected: _relationship == 'other',
                    onTap: () => setState(() => _relationship = 'other'),
                  ),
                ],
              ),
              const SizedBox(height: 16),

              // ìƒë…„ì›”ì¼ ì„ íƒ
              // TODO: BirthDatePicker ìœ„ì ¯ ì¬ì‚¬ìš©
              Text('ìƒë…„ì›”ì¼', style: context.body1.copyWith(fontWeight: FontWeight.w600)),
              const SizedBox(height: 8),
              GestureDetector(
                onTap: _selectBirthDate,
                child: Container(
                  padding: const EdgeInsets.symmetric(horizontal: 16, vertical: 12),
                  decoration: BoxDecoration(
                    border: Border.all(color: colors.border),
                    borderRadius: BorderRadius.circular(12),
                  ),
                  child: Row(
                    mainAxisAlignment: MainAxisAlignment.spaceBetween,
                    children: [
                      Text(
                        _birthDate ?? 'ìƒë…„ì›”ì¼ì„ ì„ íƒí•´ì£¼ì„¸ìš”',
                        style: context.body1.copyWith(
                          color: _birthDate != null
                              ? colors.textPrimary
                              : colors.textSecondary,
                        ),
                      ),
                      Icon(Icons.calendar_today, color: colors.textSecondary),
                    ],
                  ),
                ),
              ),
              const SizedBox(height: 8),

              // ìŒë ¥ ì²´í¬ë°•ìŠ¤
              Row(
                children: [
                  Checkbox(
                    value: _isLunar,
                    onChanged: (v) => setState(() => _isLunar = v ?? false),
                  ),
                  Text('ìŒë ¥', style: context.body2),
                ],
              ),
              const SizedBox(height: 16),

              // ì„±ë³„ ì„ íƒ
              Text('ì„±ë³„', style: context.body1.copyWith(fontWeight: FontWeight.w600)),
              const SizedBox(height: 8),
              Row(
                children: [
                  Expanded(
                    child: _GenderButton(
                      label: 'ë‚¨ì„±',
                      selected: _gender == 'male',
                      onTap: () => setState(() => _gender = 'male'),
                    ),
                  ),
                  const SizedBox(width: 12),
                  Expanded(
                    child: _GenderButton(
                      label: 'ì—¬ì„±',
                      selected: _gender == 'female',
                      onTap: () => setState(() => _gender = 'female'),
                    ),
                  ),
                ],
              ),
              const SizedBox(height: 24),

              // ì €ì¥ ë²„íŠ¼
              SizedBox(
                width: double.infinity,
                child: ElevatedButton(
                  onPressed: _isValid && !_isLoading ? _saveProfile : null,
                  style: ElevatedButton.styleFrom(
                    padding: const EdgeInsets.symmetric(vertical: 16),
                    shape: RoundedRectangleBorder(
                      borderRadius: BorderRadius.circular(12),
                    ),
                  ),
                  child: _isLoading
                      ? const SizedBox(
                          width: 20,
                          height: 20,
                          child: CircularProgressIndicator(strokeWidth: 2),
                        )
                      : const Text('ì €ì¥'),
                ),
              ),
            ],
          ),
        ),
      ),
    );
  }

  Future<void> _selectBirthDate() async {
    final date = await showDatePicker(
      context: context,
      initialDate: DateTime(1990),
      firstDate: DateTime(1900),
      lastDate: DateTime.now(),
    );
    if (date != null) {
      setState(() {
        _birthDate = '${date.year}-${date.month.toString().padLeft(2, '0')}-${date.day.toString().padLeft(2, '0')}';
      });
    }
  }

  Future<void> _saveProfile() async {
    if (!_isValid) return;

    setState(() => _isLoading = true);

    try {
      await ref.read(secondaryProfilesProvider.notifier).addProfile(
            name: _nameController.text,
            birthDate: _birthDate!,
            birthTime: _birthTime,
            gender: _gender,
            isLunar: _isLunar,
            relationship: _relationship,
          );

      if (mounted) {
        Navigator.pop(context);
        ScaffoldMessenger.of(context).showSnackBar(
          const SnackBar(content: Text('í”„ë¡œí•„ì´ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤')),
        );
      }
    } catch (e) {
      if (mounted) {
        ScaffoldMessenger.of(context).showSnackBar(
          SnackBar(content: Text('ì˜¤ë¥˜: $e')),
        );
      }
    } finally {
      if (mounted) {
        setState(() => _isLoading = false);
      }
    }
  }
}

class _RelationshipChip extends StatelessWidget {
  final String label;
  final String value;
  final bool selected;
  final VoidCallback onTap;

  const _RelationshipChip({
    required this.label,
    required this.value,
    required this.selected,
    required this.onTap,
  });

  @override
  Widget build(BuildContext context) {
    final colors = context.colors;

    return GestureDetector(
      onTap: onTap,
      child: Container(
        padding: const EdgeInsets.symmetric(horizontal: 16, vertical: 8),
        decoration: BoxDecoration(
          color: selected ? colors.primary : colors.surface,
          borderRadius: BorderRadius.circular(20),
          border: Border.all(
            color: selected ? colors.primary : colors.border,
          ),
        ),
        child: Text(
          label,
          style: context.body2.copyWith(
            color: selected ? Colors.white : colors.textPrimary,
          ),
        ),
      ),
    );
  }
}

class _GenderButton extends StatelessWidget {
  final String label;
  final bool selected;
  final VoidCallback onTap;

  const _GenderButton({
    required this.label,
    required this.selected,
    required this.onTap,
  });

  @override
  Widget build(BuildContext context) {
    final colors = context.colors;

    return GestureDetector(
      onTap: onTap,
      child: Container(
        padding: const EdgeInsets.symmetric(vertical: 14),
        decoration: BoxDecoration(
          color: selected ? colors.primary : colors.surface,
          borderRadius: BorderRadius.circular(12),
          border: Border.all(
            color: selected ? colors.primary : colors.border,
          ),
        ),
        child: Center(
          child: Text(
            label,
            style: context.body1.copyWith(
              color: selected ? Colors.white : colors.textPrimary,
              fontWeight: selected ? FontWeight.w600 : FontWeight.normal,
            ),
          ),
        ),
      ),
    );
  }
}
```

---

### 5ë‹¨ê³„: profile_screen.dart ìˆ˜ì •

**íŒŒì¼**: `lib/screens/profile/profile_screen.dart`

**ìˆ˜ì • ìœ„ì¹˜**: ìƒë‹¨ì— ProfileSwitcherCard ì¶”ê°€

```dart
// import ì¶”ê°€
import 'widgets/profile_switcher_card.dart';

// build() ë‚´ ìƒë‹¨ì— ì¶”ê°€ (ê¸°ì¡´ í”„ë¡œí•„ ì •ë³´ ìœ„ì—)
const ProfileSwitcherCard(),
const SizedBox(height: 16),
```

---

## ğŸ§ª í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤

| ì‹œë‚˜ë¦¬ì˜¤ | í…ŒìŠ¤íŠ¸ ë°©ë²• | ì˜ˆìƒ ê²°ê³¼ |
|----------|------------|----------|
| í”„ë¡œí•„ ì¶”ê°€ | í”„ë¡œí•„ ì¶”ê°€ ë°”í…€ì‹œíŠ¸ì—ì„œ ì •ë³´ ì…ë ¥ í›„ ì €ì¥ | DBì— ì €ì¥, ëª©ë¡ì— ì¶”ê°€ |
| í”„ë¡œí•„ ìŠ¤ìœ„ì¹­ | í”„ë¡œí•„ ëª©ë¡ì—ì„œ ë‹¤ë¥¸ í”„ë¡œí•„ ì„ íƒ | í™œì„± í”„ë¡œí•„ ë³€ê²½, ìš´ì„¸ ì¡°íšŒ ì‹œ í•´ë‹¹ í”„ë¡œí•„ ê¸°ì¤€ |
| í”„ë¡œí•„ ì‚­ì œ | í”„ë¡œí•„ ë¡±í”„ë ˆìŠ¤ â†’ ì‚­ì œ | DBì—ì„œ ì‚­ì œ, ëª©ë¡ì—ì„œ ì œê±° |
| ìµœëŒ€ ê°œìˆ˜ ì œí•œ | 5ê°œ ì´ˆê³¼ ì¶”ê°€ ì‹œë„ | ì—ëŸ¬ ë©”ì‹œì§€ í‘œì‹œ |
| ë¡œê·¸ì•„ì›ƒ í›„ ì¬ë¡œê·¸ì¸ | ë¡œê·¸ì•„ì›ƒ â†’ ë¡œê·¸ì¸ | ì„œë¸Œ í”„ë¡œí•„ ìœ ì§€ |

---

## ğŸ“Š ì˜í–¥ ë²”ìœ„

| íŒŒì¼ | ë³€ê²½ ë‚´ìš© | ì˜í–¥ë„ |
|------|----------|--------|
| DB: secondary_profiles | ìƒˆ í…Œì´ë¸” ìƒì„± | ì¤‘ê°„ |
| secondary_profile.dart | ìƒˆ ëª¨ë¸ | ë‚®ìŒ |
| secondary_profiles_provider.dart | ìƒˆ Provider | ë‚®ìŒ |
| active_profile_provider.dart | ìƒˆ Provider | ë‚®ìŒ |
| profile_switcher_card.dart | ìƒˆ ìœ„ì ¯ | ë‚®ìŒ |
| profile_list_sheet.dart | ìƒˆ ìœ„ì ¯ | ë‚®ìŒ |
| add_profile_sheet.dart | ìƒˆ ìœ„ì ¯ | ë‚®ìŒ |
| profile_screen.dart | ìŠ¤ìœ„ì²˜ ì¹´ë“œ ì¶”ê°€ | ë‚®ìŒ |

---

## ğŸ“‹ êµ¬í˜„ ì²´í¬ë¦¬ìŠ¤íŠ¸

- [ ] DB ë§ˆì´ê·¸ë ˆì´ì…˜ (secondary_profiles í…Œì´ë¸”)
- [ ] SecondaryProfile ëª¨ë¸ ìƒì„±
- [ ] SecondaryProfilesProvider êµ¬í˜„
- [ ] ActiveProfileProvider êµ¬í˜„
- [ ] ProfileSwitcherCard ìœ„ì ¯
- [ ] ProfileListSheet ìœ„ì ¯
- [ ] AddProfileSheet ìœ„ì ¯
- [ ] profile_screen.dart ìˆ˜ì •
- [ ] flutter analyze í†µê³¼
- [ ] í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤ ê²€ì¦

---

## ğŸ”® í–¥í›„ í™•ì¥ ê³ ë ¤ì‚¬í•­

1. **í”„ë¦¬ë¯¸ì—„ ì œí•œ**: ë¬´ë£Œ ì‚¬ìš©ìëŠ” 1ê°œ, í”„ë¦¬ë¯¸ì—„ì€ 5ê°œ
2. **ì•„ë°”íƒ€ ì„ íƒ**: ê° í”„ë¡œí•„ì— ê³ ìœ  ì•„ë°”íƒ€ ì´ë¯¸ì§€
3. **ì•Œë¦¼ ì„¤ì •**: í”„ë¡œí•„ë³„ ìš´ì„¸ ì•Œë¦¼
4. **ìš´ì„¸ ê¸°ë¡**: í”„ë¡œí•„ë³„ ì¡°íšŒ ê¸°ë¡ ì €ì¥
5. **ê³µìœ  ê¸°ëŠ¥**: í”„ë¡œí•„ ìš´ì„¸ ê²°ê³¼ ê³µìœ 